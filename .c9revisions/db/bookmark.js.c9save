{"ts":1360303519500,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1360304314893,"patch":[[{"diffs":[[1,"var mongo = require('mongoskin');\r\n\r\nvar db = mongo.db('mongodb://wonny:wodnjs98@linus.mongohq.com:10053/wonny')\r\n\r\n\r\nexports.findById = function(req, res) {\r\n    var id = req.params.id;\r\n    console.log('Retrieving wine: ' + id);\r\n    db.collection('wonny', function(err, collection) {\r\n        collection.findOne({'_id':new BSON.ObjectID(id)}, function(err, item) {\r\n            res.send(item);\r\n        });\r\n    });\r\n};\r\n\r\nexports.findAll = function(req, res) {\r\n    db.collection('wonny', function(err, collection) {\r\n        collection.find().toArray(function(err, items) {\r\n            res.send(items);\r\n        });\r\n    });\r\n};\r\n\r\nexports.addBookmark = function(req, res) {\r\n    var data = req.body;\r\n    console.log('Adding data: ' + JSON.stringify(data));\r\n    db.collection('wonny', function(err, collection) {\r\n        collection.insert(data, {safe:true}, function(err, result) {\r\n            if (err) {\r\n                res.send({'error':'An error has occurred'});\r\n            } else {\r\n                console.log('Success: ' + JSON.stringify(result[0]));\r\n                res.send(result[0]);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexports.updateWine = function(req, res) {\r\n    var id = req.params.id;\r\n    var wine = req.body;\r\n    console.log('Updating wine: ' + id);\r\n    console.log(JSON.stringify(wine));\r\n    db.collection('wines', function(err, collection) {\r\n        collection.update({'_id':new BSON.ObjectID(id)}, wine, {safe:true}, function(err, result) {\r\n            if (err) {\r\n                console.log('Error updating wine: ' + err);\r\n                res.send({'error':'An error has occurred'});\r\n            } else {\r\n                console.log('' + result + ' document(s) updated');\r\n                res.send(wine);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1800}]],"length":1800,"saved":false}
{"ts":1360304359492,"patch":[[{"diffs":[[0,"    var "],[-1,"wine"],[1,"data"],[0," = req.b"]],"start1":1223,"start2":1223,"length1":20,"length2":20},{"diffs":[[0,"g('Updating "],[-1,"wine"],[1,"data"],[0,": ' + id);\r\n"]],"start1":1263,"start2":1263,"length1":28,"length2":28},{"diffs":[[0,"ringify("],[-1,"wine"],[1,"data"],[0,"));\r\n   "]],"start1":1314,"start2":1314,"length1":20,"length2":20},{"diffs":[[0,"n('w"],[-1,"ines"],[1,"onny"],[0,"', f"]],"start1":1347,"start2":1347,"length1":12,"length2":12},{"diffs":[[0,"D(id)}, "],[-1,"wine"],[1,"data"],[0,", {safe:"]],"start1":1436,"start2":1436,"length1":20,"length2":20},{"diffs":[[0,"or updating "],[-1,"wine"],[1,"data"],[0,": ' + err);\r"]],"start1":1544,"start2":1544,"length1":28,"length2":28},{"diffs":[[0,"es.send("],[-1,"wine"],[1,"data"],[0,");\r\n    "]],"start1":1742,"start2":1742,"length1":20,"length2":20}]],"length":1800,"saved":false}
{"ts":1360304560359,"patch":[[{"diffs":[[0,"onny')\r\n"],[1,"var BSON = mongo.BSONPure;"],[0,"\r\n\r\nexpo"]],"start1":106,"start2":106,"length1":16,"length2":42}]],"length":1826,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360715880772,"patch":[[{"diffs":[[0,"ing "],[-1,"wine"],[0,": ' "]],"start1":238,"start2":238,"length1":12,"length2":8}]],"length":1822,"saved":false}
{"ts":1360732078924,"patch":[[{"diffs":[[0,"/wonny')"],[1,";"],[0,"\r\nvar BS"]],"start1":104,"start2":104,"length1":16,"length2":17}]],"length":1823,"saved":false}
